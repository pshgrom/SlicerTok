# Анализ бандла

## Как запустить

```bash
npm run analyze
```

После сборки откроются (или появятся в `dist/`):

- **dist/bundle-report.html** — интерактивная treemap (открой в браузере).
- **dist/bundle-report.json** — сырые данные для скриптов.

Отчёт не коммитится (указан в `.gitignore`).

---

## Топ-5 модулей по размеру (JS, последний прогон)

| № | Чанк | Размер | Что делать |
|---|------|--------|------------|
| 1 | **vendor_vuetify** | ~325 kB | Тяжёлый UI-фреймворк. Оптимизации: tree-shake неиспользуемые компоненты (vite-plugin-vuetify уже помогает), по возможности не подключать лишние плагины; иконки — подключать только нужные вместо всего @mdi/font. |
| 2 | **vendor_chart** | ~139 kB | Chart.js + vue-chartjs. Загружать лениво только на страницах со статистикой/графиками (`() => import('vue-chartjs')` в роуте или в компоненте). |
| 3 | **vendor_vue** | ~104 kB | Ядро Vue. Уменьшить почти нельзя; следить, чтобы не дублировалось (dedupe в Vite уже есть). |
| 4 | **widget_modals** | ~88 kB | Все модалки в одном чанке. Разбить по модалкам (dynamic import в роуте/родителе) и подгружать только при открытии. |
| 5 | **shared_ui** | ~64 kB | Общие UI-компоненты. Вынести самые тяжёлые в отдельные чанки и подгружать лениво там, где они нужны. |

Дополнительно большие ресурсы: **vendor_font** (~324 kB CSS) и **vendor_vuetify** CSS (~518 kB) — шрифты и стили Vuetify/MDI; имеет смысл подключать только используемые иконки и темы.

---

## Рекомендации

1. **Chart.js** — ленивый импорт на страницах streamer-stats / admin-stats и т.п.
2. **Модалки** — загрузка по требованию (например, только при клике «Открыть»).
3. **Иконки MDI** — перейти на SVG-иконки (уже есть SvgIcon) и отключить лишние шрифты, где возможно.
4. Периодически запускать `npm run analyze` и смотреть, не появились ли новые тяжёлые чанки.
